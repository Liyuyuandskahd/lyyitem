"use strict";$(".sort p").each(function(e,n){$(n).mouseenter(function(){"iconfont icon-jiangxu1"==$(this).find("span").eq(1).attr("class")?$(this).find("span").eq(1).attr("class","iconfont icon-shengxu1"):$(this).find("span").eq(1).attr("class","iconfont icon-jiangxu1")}),$(n).mouseleave(function(){"iconfont icon-jiangxu1"==$(this).find("span").eq(1).attr("class")?$(this).find("span").eq(1).attr("class","iconfont icon-shengxu1"):$(this).find("span").eq(1).attr("class","iconfont icon-jiangxu1")})}),function(){var s=document.querySelector(".main-right-shoplist"),a=(document.querySelector(".pagenumber"),document.querySelector(".pagenumber-box")),d=document.querySelector(".pagination"),h=(document.querySelector(".intext"),document.querySelector(".seek"),document.querySelector(".sort"),document.querySelector(".price-rank")),u=document.querySelector(".notrank"),p=document.querySelector(".page"),g=document.querySelector(".shopstotal"),f=document.querySelector(".nowpage"),m=document.querySelectorAll(".allpage"),v=1,y=16,e=location.search.slice(1),N="",q=!1;!function l(){ajax({type:"get",url:"../api/getdata.php",data:{ipage:v,num:y,rank:N,keyword:e},success:function(e){!function(e){var n=JSON.parse(e),t=n.newarr.map(function(e){return"<li data-id="+e.id+' title="'+e.name+'">\n                            <div class="shoplist-box">\n                                <img src="'+e.imgurl+'" alt="">\n                            </div>\n                            <p>'+e.name+"</p>\n                            <p>\n                                <span>¥"+e.nowprice+"</span>\n                                <span>¥"+e.originalprice+"</span>\n                            </p>\n                            <p>已售"+e.sell+'件</p>\n                            <p>\n                                <span class="iconfont icon-shoucang11"></span>\n                                <span>收藏</span>\n                                <span class="iconfont icon-pinglun"></span>\n                                <span>'+e.comment+'</span>\n                            </p>\n                            <span class="boutique">精品</span>\n                        </li>'}).join("");s.innerHTML=t,g.innerHTML=n.tatol,f.innerHTML=v;for(var c=Math.ceil(n.tatol/y),o=0;o<m.length;o++)m[o].innerHTML=c;var r="";for(i=0;i<c;i++)r+="<span>"+(i+1)+"</span>";a.innerHTML=r,a.style.width=c*a.children[0].offsetWidth+10*c+"px",a.children[v-1].classList.add("active"),a.onclick=function(e){"SPAN"==e.target.tagName&&(v=e.target.innerHTML,window.scrollTo(0,0),l())},h.onclick=function(e){console.log(e.target.parentNode.children[0]);for(var n=0;n<e.target.parentNode.children.length;n++)for(var t=0;t<e.target.parentNode.children[n].children.length;t++)e.target.parentNode.children[n].children[t].style.color="#666666";for(var c=0;c<e.target.parentNode.parentNode.children.length;c++)for(var o=0;o<e.target.parentNode.parentNode.children[c].children.length;o++)e.target.parentNode.parentNode.children[c].children[o].style.color="#666666";q=q?(N="asc",h.children[1].className="iconfont icon-jiangxu1",h.children[0].style.color="#c01414",!(h.children[1].style.color="#c01414")):(N="desc",h.children[1].className="iconfont icon-shengxu1",h.children[0].style.color="#c01414",h.children[1].style.color="#c01414",!0),v=1,l()},u.onclick=function(e){for(var n=0;n<e.target.parentNode.children.length;n++)for(var t=0;t<e.target.parentNode.children[n].children.length;t++)e.target.parentNode.children[n].children[t].style.color="#666666";for(var c=0;c<e.target.parentNode.parentNode.children.length;c++)for(var o=0;o<e.target.parentNode.parentNode.children[c].children.length;o++)e.target.parentNode.parentNode.children[c].children[o].style.color="#666666";N="",u.children[0].style.color="#c01414",v=1,l()},1==v?(p.children[0].classList.add("showcss"),p.children[1].classList.add("showcss")):(p.children[0].classList.remove("showcss"),p.children[1].classList.remove("showcss"),p.children[0].onmouseover=function(){p.children[0].classList.add("altercss")},p.children[0].onmouseout=function(){p.children[0].classList.remove("altercss")},p.children[1].onmouseover=function(){p.children[1].classList.add("altercss")},p.children[1].onmouseout=function(){p.children[1].classList.remove("altercss")}),v==a.children.length?(p.children[3].classList.add("showcss"),p.children[4].classList.add("showcss")):(p.children[3].classList.remove("showcss"),p.children[4].classList.remove("showcss"),p.children[3].onmouseover=function(){p.children[3].classList.add("altercss")},p.children[3].onmouseout=function(){p.children[3].classList.remove("altercss")},p.children[4].onmouseover=function(){p.children[4].classList.add("altercss")},p.children[4].onmouseout=function(){p.children[4].classList.remove("altercss")}),d.onclick=function(e){"iconfont icon-shangyiye"==e.target.className&&1<v&&(v--,scrollTo(0,0),l()),"iconfont icon-xiayiye"==e.target.className&&v<a.children.length&&(v++,scrollTo(0,0),l())},p.onclick=function(e){"首页"==e.target.value&&1!=v&&(v=1,scrollTo(0,0),l()),"上一页"==e.target.value&&1<v&&(v--,l(),scrollTo(0,0)),"下一页"==e.target.value&&v<a.children.length&&(v++,l(),scrollTo(0,0)),"尾页"==e.target.value&&v!=a.children.length&&(v=a.children.length,l(),scrollTo(0,0))},s.onclick=function(e){if("IMG"==e.target.tagName){console.log(e.target.parentNode.parentNode.dataset.id);var n=e.target.parentNode.parentNode.dataset.id;window.open("xqy.html?"+n)}},document.querySelector(".main-page").onclick=function(){location.href="../index.html"},document.querySelector(".list-page").onclick=function(){location.href="liebiaoye.html"}}(e)}})}()}();