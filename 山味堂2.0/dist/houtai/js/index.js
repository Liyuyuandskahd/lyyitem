"use strict";$(function(){$(".meun-item").click(function(){$(this).attr("class","meun-item meun-item-active").siblings().attr("class","meun-item"),$("#admintion").attr("class","meun-title"),$(".tab-pane").css("display","none")}),$(".user").click(function(){function creatname(){$.ajax({type:"get",url:"api/username.php",dataType:"json",data:{m:"inquire"},success:function success(str){var html=str.map(function(e,a){return' <div class="row">\n                            <div class="col-xs-2">\n                                '+(a+1)+'\n                            </div>\n                            <div class="col-xs-2 ">\n                                '+e.username+'\n                            </div>\n                            <div class="col-xs-2">\n                                '+e.password+'\n                            </div>\n                            <div class="col-xs-2">\n                            </div>\n                            <div class="col-xs-2">\n                                正常\n                            </div>\n                            <div class="col-xs-2" data-uid="'+e.id+'">\n                                <button class="btn btn-success btn-xs btn-up" data-toggle="modal"\n                                    data-target="#reviseUser">修改</button>\n                                <button class="btn btn-danger btn-xs btn-del" data-toggle="modal"\n                                    data-target="#deleteUser">删除</button>\n                            </div>\n                        </div>'}).join("");function checkInput1(opt){opt.ele.onfocus=function(){opt.ele.placeholder=""},opt.ele.oninput=function(){var val=this.value.trim();if(val){var str="checkReg."+opt.type+"(val)",isok=eval(str);istrue1=isok?(opt.inf.className=opt.classname+" iconfont icon-zhengque1",opt.ele.style.borderColor="#bdc3c7",opt.inf.style.color="#58bc58",!0):(opt.inf.className=opt.classname+" iconfont icon-cuowu1",opt.ele.style.borderColor="red",opt.inf.style.color="red",!1)}else opt.inf.className=opt.classname+" iconfont icon-cuowu1",opt.ele.style.borderColor="red",opt.inf.style.color="red"}}function checkInput2(opt){opt.ele.onfocus=function(){opt.ele.placeholder=""},opt.ele.oninput=function(){var val=this.value.trim();if(val){var str="checkReg."+opt.type+"(val)",isok=eval(str);istrue2=isok?(opt.inf.className=opt.classname+" iconfont icon-zhengque1",opt.ele.style.borderColor="#bdc3c7",opt.inf.style.color="#58bc58",!0):(opt.inf.className=opt.classname+" iconfont icon-cuowu1",opt.ele.style.borderColor="red",opt.inf.style.color="red",!1)}else opt.inf.className=opt.classname+" iconfont icon-cuowu1",opt.ele.style.borderColor="red",opt.inf.style.color="red"}}$(".tablebody").html(html),$(".btn-del").click(function(){$("#deleteUser").css("display","block"),$("#deleteUser").attr("class","modal fade in");var e=$(this.parentNode).attr("data-uid");$(".del").click(function(){$.ajax({type:"get",url:"api/username.php",data:{m:"del",uid:e},success:function(e){creatname(),$(".fade").css("display","none"),$(".fade").attr("class","modal fade")}})})}),$(".btn-up").off("click").click(function(){console.log(1),$("#reviseUser").attr("class","modal fade in"),$("#reviseUser").css("display","block");var a=$(this.parentNode).attr("data-uid");$(".pas-sure").click(function(){var e=$("#newpass").val().trim();e&&$.ajax({type:"get",url:"api/username.php",data:{uid:a,m:"amend",pas:e},success:function(e){creatname(),$("#newpass").val(""),$(".fade").css("display","none"),$(".fade").attr("class","modal fade")}})})});var uname=document.querySelector("#sName"),namehint=document.querySelector(".name-hint"),password=document.querySelector("#pass"),passwordhint=document.querySelector(".password-hint"),istrue1=!1,istrue2=!1;checkInput1({ele:uname,inf:namehint,classname:"name-hint",type:"name"}),checkInput2({ele:password,inf:passwordhint,classname:"password-hint",type:"password"}),$(".btn-yellow").click(function(){$("#addUser").css("display","block"),$("#addUser").attr("class","modal fade in"),$(".pass-sure").click(function(){var e=$("#sName").val().trim(),a=$("#pass").val().trim();istrue1&&istrue2&&$.ajax({type:"post",url:"api/username.php",data:{m:"add",username:e,pas:a},success:function(e){var a=JSON.parse(e);a.code?(alert(a.message),$("#sName").val(""),$("#sName").focus(),$(".name-hint").attr("class","name-hint")):(alert(a.message),creatname(),$("#sName").val(""),$("#pass").val(""),$(".name-hint").attr("class","name-hint"),$(".password-hint").attr("class","password-hint"),$(".fade").css("display","none"),$(".fade").attr("class","modal fade"))}})})}),$(".btn-white").click(function(){$(".fade").css("display","none"),$(".fade").attr("class","modal fade")}),$(".close").click(function(){$(".fade").css("display","none"),$(".fade").attr("class","modal fade")})}})}$(".tab-pane").css("display","block"),creatname()})});